(()=>{"use strict";var t={401:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});const o=s(e(937)),n=s(e(135)),h=s(e(174));(t=>{if(!t)return;const i=t.getContext("2d"),e=new o.default,s=new n.default;let r=e.genUnusedPosition(s.coordinates);const l=new h.default(r);e.setSize(i),e.setGrid(i),s.draw(i),l.draw(i);const a=()=>{setTimeout((function(){e.clear(i),e.setGrid(i),s.update(i),s.appleCollisionDetection(l.coordinates),s.hasEatenApple&&(r=e.genUnusedPosition(s.coordinates),l.coordinates=r,s.grow(),s.hasEatenApple=!1),s.draw(i),l.draw(i),requestAnimationFrame(a)}),80)};a()})((t=>{const i=document.createElement("canvas"),e=document.getElementById("canvas-container");return e?(e.append(i),i):null})())},606:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.settings=i.appleSettings=i.snakeSettings=i.mapSettings=void 0;const e={map:{columns:24,rows:24,cellSize:24,strokeStyle:"rgba(0, 0, 0, 30%)",lineWidth:.1},snake:{columns:24,rows:24,cellSize:24,step:24,color:"chartreuse"},apple:{columns:24,rows:24,cellSize:24,color:"yellow"}};i.settings=e;const s=e.map;i.mapSettings=s;const o=e.snake;i.snakeSettings=o;const n=e.apple;i.appleSettings=n},174:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(606);i.default=class{constructor(t){this.config=s.appleSettings,this._isEaten=!1,this._size=this.config.cellSize,this.pos=t}draw(t){t&&(t.beginPath(),t.roundRect(this.pos.x,this.pos.y,this._size,this._size,10),t.strokeStyle="black",t.lineWidth=1,t.fillStyle=`${this.config.color}`,t.fill(),t.stroke())}get coordinates(){if(!this.pos)throw new Error("Apple has no coordinates");return this.pos}get isEaten(){return this._isEaten}set isEaten(t){this._isEaten=t}set coordinates(t){t&&(this.pos={x:t.x,y:t.y})}}},341:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(){this.up=!1,this.down=!1,this.left=!1,this.right=!0,this.addKeyboardListener()}addKeyboardListener(){document.onkeydown=t=>{switch(t.code){case"ArrowUp":if(this.down)break;this.up=!0,this.down=!1,this.left=!1,this.right=!1;break;case"ArrowDown":if(this.up)break;this.up=!1,this.down=!0,this.left=!1,this.right=!1;break;case"ArrowLeft":if(this.right)break;this.up=!1,this.down=!1,this.left=!0,this.right=!1;break;case"ArrowRight":if(this.left)break;this.up=!1,this.down=!1,this.left=!1,this.right=!0}}}}},937:(t,i,e)=>{Object.defineProperty(i,"__esModule",{value:!0});const s=e(606),o=e(269);i.default=class{constructor(){if(this.config=s.mapSettings,this.calcWidth=()=>this.config.columns*this.config.cellSize,this.calcHeight=()=>this.config.rows*this.config.cellSize,!this.config)throw new Error("Config is undefined!");this._width=this.calcWidth(),this._height=this.calcHeight()}genUnusedPosition(t){let i=(0,o.randPosition)(this.config.cellSize,this.config.columns),e=(0,o.randPosition)(this.config.cellSize,this.config.rows);for(let s of t)if(s.x===i&&s.y===e)return this.genUnusedPosition(t);return{x:i,y:e}}setSize(t,i,e){t&&(t.canvas.width=i||this._width,t.canvas.height=e||this._height,(i||e)&&(this.width=i||this._width,this.height=e||this._height))}setGrid(t){t&&(this.drawVerticalLines(t),this.drawHorizontalLines(t))}clear(t){t&&t.clearRect(0,0,this._width,this._height)}drawVerticalLines(t){let i=this.config.cellSize;t.beginPath();for(let e=0;e<=this._width;e+=i)t.moveTo(e,0),t.lineTo(e,this._height);t.strokeStyle=`${this.config.strokeStyle}`,t.lineWidth=this.config.lineWidth,t.stroke()}drawHorizontalLines(t){let i=this.config.cellSize;t.beginPath();for(let e=0;e<=this._height;e+=i)t.moveTo(0,e),t.lineTo(this._width,e);t.strokeStyle=`${this.config.strokeStyle}`,t.lineWidth=this.config.lineWidth,t.stroke()}get width(){return this._width?this._width:0}set width(t){this._width=t}get height(){return this._width?this._height:0}set height(t){this._height=t}}},135:function(t,i,e){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});const o=e(606),n=e(269),h=s(e(341));i.default=class{constructor(){this.config=o.snakeSettings,this._hasEatenApple=!1,this.controls=new h.default;let t=(0,n.randPosition)(this.config.step,this.config.columns),i=(0,n.randPosition)(this.config.step,this.config.rows);this.pos=[{x:t,y:i}]}draw(t){if(!t)return;const{cellSize:i}=this.config;for(let e of this.pos)t.beginPath(),t.roundRect(e.x,e.y,i,i,4),t.fillStyle=`${this.config.color}`,t.strokeStyle="black",t.lineWidth=1,t.fill(),t.stroke()}grow(){let t=this.pos[this.pos.length-1];this.pos.push({x:t.x,y:t.y})}update(t){this.move(),this.sideCollisionDetection(t.canvas.width,t.canvas.height)}appleCollisionDetection(t){const i=this.headCoordinates;i.x===t.x&&i.y===t.y&&(this._hasEatenApple=!0)}sideCollisionDetection(t,i){let e=this.headCoordinates;if(e.x>=t){let t={x:0,y:e.y};this.pos.unshift(t),this.pos.pop()}if(e.x<0){let t={x:this.config.step*this.config.columns-this.config.step,y:e.y};this.pos.unshift(t),this.pos.pop()}if(e.y>=i){let t={x:e.x,y:0};this.pos.unshift(t),this.pos.pop()}if(e.y<0){let t={x:e.x,y:this.config.step*this.config.rows-this.config.step};this.pos.unshift(t),this.pos.pop()}}move(){this.controls.up&&this.moveUp(),this.controls.down&&this.moveDown(),this.controls.left&&this.moveLeft(),this.controls.right&&this.moveRight()}moveRight(){let t=this.headCoordinates,i={x:t.x+this.config.step,y:t.y};this.pos.unshift(i),this.pos.pop()}moveLeft(){let t=this.headCoordinates,i={x:t.x-this.config.step,y:t.y};this.pos.unshift(i),this.pos.pop()}moveUp(){let t=this.headCoordinates,i={x:t.x,y:t.y-this.config.step};this.pos.unshift(i),this.pos.pop()}moveDown(){let t=this.headCoordinates,i={x:t.x,y:t.y+this.config.step};this.pos.unshift(i),this.pos.pop()}get hasEatenApple(){return this._hasEatenApple}get coordinates(){return this.pos}get headCoordinates(){return{x:this.pos[0].x,y:this.pos[0].y}}set hasEatenApple(t){this._hasEatenApple=t}set headCoordinates(t){const{x:i,y:e}=t;this.pos[0].x=i,this.pos[0].y=e}}},269:(t,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.randPosition=void 0,i.randPosition=(t,i)=>t*Math.floor(Math.random()*i)}},i={};!function e(s){var o=i[s];if(void 0!==o)return o.exports;var n=i[s]={exports:{}};return t[s].call(n.exports,n,n.exports,e),n.exports}(401)})();
//# sourceMappingURL=bundle.js.map