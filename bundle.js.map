{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://canvas_demo/./src/app/main.ts","webpack://canvas_demo/./src/config/settings.ts","webpack://canvas_demo/./src/entities/Apple.ts","webpack://canvas_demo/./src/entities/Controls.ts","webpack://canvas_demo/./src/entities/Map.ts","webpack://canvas_demo/./src/entities/Snake.ts","webpack://canvas_demo/./src/helpers/randPosition.ts","webpack://canvas_demo/webpack/bootstrap","webpack://canvas_demo/./src/index.ts"],"sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Map_1 = __importDefault(require(\"../entities/Map\"));\r\nconst Snake_1 = __importDefault(require(\"../entities/Snake\"));\r\nconst Apple_1 = __importDefault(require(\"../entities/Apple\"));\r\nconst createCanvas = (wrapperId) => {\r\n    const canvas = document.createElement(\"canvas\");\r\n    const container = document.getElementById(`${wrapperId}`);\r\n    if (container) {\r\n        container.append(canvas);\r\n        return canvas;\r\n    }\r\n    return null;\r\n};\r\nconst gameSetup = (canvas) => {\r\n    if (!canvas)\r\n        return;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    const map = new Map_1.default();\r\n    const snake = new Snake_1.default();\r\n    let position = map.genUnusedPosition(snake.coordinates);\r\n    const apple = new Apple_1.default(position);\r\n    map.setSize(ctx);\r\n    map.setGrid(ctx);\r\n    snake.draw(ctx);\r\n    apple.draw(ctx);\r\n    const animate = () => {\r\n        setTimeout(function onTick() {\r\n            map.clear(ctx);\r\n            map.setGrid(ctx);\r\n            snake.update(ctx);\r\n            snake.appleCollisionDetection(apple.coordinates);\r\n            if (snake.hasEatenApple) {\r\n                position = map.genUnusedPosition(snake.coordinates);\r\n                apple.coordinates = position;\r\n                snake.grow();\r\n                snake.hasEatenApple = false;\r\n            }\r\n            snake.draw(ctx);\r\n            apple.draw(ctx);\r\n            requestAnimationFrame(animate);\r\n        }, 80);\r\n    };\r\n    animate();\r\n};\r\nconst canvas = createCanvas(\"canvas-container\");\r\ngameSetup(canvas);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.settings = exports.appleSettings = exports.snakeSettings = exports.mapSettings = void 0;\r\nconst size = 24;\r\nconst step = size;\r\nconst columns = 24;\r\nconst rows = 24;\r\nconst settings = {\r\n    map: {\r\n        columns,\r\n        rows,\r\n        cellSize: size,\r\n        strokeStyle: \"rgba(0, 0, 0, 30%)\",\r\n        lineWidth: .1,\r\n    },\r\n    snake: {\r\n        columns,\r\n        rows,\r\n        cellSize: size,\r\n        step,\r\n        color: \"chartreuse\",\r\n    },\r\n    apple: {\r\n        columns,\r\n        rows,\r\n        cellSize: size,\r\n        color: \"yellow\",\r\n    },\r\n};\r\nexports.settings = settings;\r\nconst mapSettings = settings.map;\r\nexports.mapSettings = mapSettings;\r\nconst snakeSettings = settings.snake;\r\nexports.snakeSettings = snakeSettings;\r\nconst appleSettings = settings.apple;\r\nexports.appleSettings = appleSettings;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst settings_1 = require(\"../config/settings\");\r\nclass Apple {\r\n    constructor(pos) {\r\n        this.config = settings_1.appleSettings;\r\n        this._isEaten = false;\r\n        this._size = this.config.cellSize;\r\n        this.pos = pos;\r\n    }\r\n    draw(ctx) {\r\n        if (!ctx)\r\n            return;\r\n        ctx.beginPath();\r\n        ctx.roundRect(this.pos.x, this.pos.y, this._size, this._size, 10);\r\n        // ctx.rect(this.pos.x, this.pos.y, this._size, this._size);\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.lineWidth = 1;\r\n        ctx.fillStyle = `${this.config.color}`;\r\n        ctx.fill();\r\n        ctx.stroke();\r\n    }\r\n    get coordinates() {\r\n        if (!this.pos)\r\n            throw new Error(\"Apple has no coordinates\");\r\n        return this.pos;\r\n    }\r\n    get isEaten() {\r\n        return this._isEaten;\r\n    }\r\n    set isEaten(bool) {\r\n        this._isEaten = bool;\r\n    }\r\n    set coordinates(pos) {\r\n        if (!pos)\r\n            return;\r\n        this.pos = {\r\n            x: pos.x,\r\n            y: pos.y,\r\n        };\r\n    }\r\n}\r\nexports.default = Apple;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Controls {\r\n    constructor() {\r\n        this.up = false;\r\n        this.down = false;\r\n        this.left = false;\r\n        this.right = true;\r\n        this.addKeyboardListener();\r\n    }\r\n    addKeyboardListener() {\r\n        document.onkeydown = (e) => {\r\n            switch (e.code) {\r\n                case \"ArrowUp\":\r\n                    if (this.down)\r\n                        break;\r\n                    this.up = true;\r\n                    this.down = false;\r\n                    this.left = false;\r\n                    this.right = false;\r\n                    break;\r\n                case \"ArrowDown\":\r\n                    if (this.up)\r\n                        break;\r\n                    this.up = false;\r\n                    this.down = true;\r\n                    this.left = false;\r\n                    this.right = false;\r\n                    break;\r\n                case \"ArrowLeft\":\r\n                    if (this.right)\r\n                        break;\r\n                    this.up = false;\r\n                    this.down = false;\r\n                    this.left = true;\r\n                    this.right = false;\r\n                    break;\r\n                case \"ArrowRight\":\r\n                    if (this.left)\r\n                        break;\r\n                    this.up = false;\r\n                    this.down = false;\r\n                    this.left = false;\r\n                    this.right = true;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        };\r\n    }\r\n}\r\nexports.default = Controls;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst settings_1 = require(\"../config/settings\");\r\nconst randPosition_1 = require(\"../helpers/randPosition\");\r\nclass BaseMap {\r\n    constructor() {\r\n        this.config = settings_1.mapSettings;\r\n        this.calcWidth = () => this.config.columns * this.config.cellSize;\r\n        this.calcHeight = () => this.config.rows * this.config.cellSize;\r\n        if (!this.config)\r\n            throw new Error(\"Config is undefined!\");\r\n        this._width = this.calcWidth();\r\n        this._height = this.calcHeight();\r\n    }\r\n    genUnusedPosition(positions) {\r\n        let x = (0, randPosition_1.randPosition)(this.config.cellSize, this.config.columns);\r\n        let y = (0, randPosition_1.randPosition)(this.config.cellSize, this.config.rows);\r\n        for (let pos of positions) {\r\n            if (pos.x === x && pos.y === y) {\r\n                return this.genUnusedPosition(positions);\r\n            }\r\n        }\r\n        return { x, y };\r\n    }\r\n    setSize(ctx, w, h) {\r\n        if (!ctx)\r\n            return;\r\n        ctx.canvas.width = w || this._width;\r\n        ctx.canvas.height = h || this._height;\r\n        if (w || h) {\r\n            this.width = w || this._width;\r\n            this.height = h || this._height;\r\n        }\r\n    }\r\n    setGrid(ctx) {\r\n        if (!ctx)\r\n            return;\r\n        this.drawVerticalLines(ctx);\r\n        this.drawHorizontalLines(ctx);\r\n    }\r\n    clear(ctx) {\r\n        if (!ctx)\r\n            return;\r\n        ctx.clearRect(0, 0, this._width, this._height);\r\n    }\r\n    drawVerticalLines(ctx) {\r\n        let step = this.config.cellSize;\r\n        ctx.beginPath();\r\n        for (let x = 0; x <= this._width; x += step) {\r\n            ctx.moveTo(x, 0);\r\n            ctx.lineTo(x, this._height);\r\n        }\r\n        ctx.strokeStyle = `${this.config.strokeStyle}`;\r\n        ctx.lineWidth = this.config.lineWidth;\r\n        ctx.stroke();\r\n    }\r\n    drawHorizontalLines(ctx) {\r\n        let step = this.config.cellSize;\r\n        ctx.beginPath();\r\n        for (let y = 0; y <= this._height; y += step) {\r\n            ctx.moveTo(0, y);\r\n            ctx.lineTo(this._width, y);\r\n        }\r\n        ctx.strokeStyle = `${this.config.strokeStyle}`;\r\n        ctx.lineWidth = this.config.lineWidth;\r\n        ctx.stroke();\r\n    }\r\n    get width() {\r\n        if (!this._width)\r\n            return 0;\r\n        return this._width;\r\n    }\r\n    set width(w) {\r\n        this._width = w;\r\n    }\r\n    get height() {\r\n        if (!this._width)\r\n            return 0;\r\n        return this._height;\r\n    }\r\n    set height(h) {\r\n        this._height = h;\r\n    }\r\n}\r\nexports.default = BaseMap;\r\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst settings_1 = require(\"../config/settings\");\r\nconst randPosition_1 = require(\"../helpers/randPosition\");\r\nconst Controls_1 = __importDefault(require(\"./Controls\"));\r\nclass Snake {\r\n    constructor() {\r\n        this.config = settings_1.snakeSettings;\r\n        this._hasEatenApple = false;\r\n        this.controls = new Controls_1.default();\r\n        let x = (0, randPosition_1.randPosition)(this.config.step, this.config.columns);\r\n        let y = (0, randPosition_1.randPosition)(this.config.step, this.config.rows);\r\n        this.pos = [{ x, y }];\r\n    }\r\n    draw(ctx) {\r\n        if (!ctx)\r\n            return;\r\n        const { cellSize } = this.config;\r\n        for (let pos of this.pos) {\r\n            ctx.beginPath();\r\n            ctx.roundRect(pos.x, pos.y, cellSize, cellSize, 4);\r\n            // ctx.rect(pos.x, pos.y, cellSize, cellSize);\r\n            ctx.fillStyle = `${this.config.color}`;\r\n            ctx.strokeStyle = \"black\";\r\n            ctx.lineWidth = 1;\r\n            ctx.fill();\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    grow() {\r\n        let lastPart = this.pos[this.pos.length - 1];\r\n        this.pos.push({\r\n            x: lastPart.x,\r\n            y: lastPart.y,\r\n        });\r\n    }\r\n    update(ctx) {\r\n        this.move();\r\n        this.sideCollisionDetection(ctx.canvas.width, ctx.canvas.height);\r\n    }\r\n    appleCollisionDetection(pos) {\r\n        const head = this.headCoordinates;\r\n        if (head.x === pos.x && head.y === pos.y) {\r\n            this._hasEatenApple = true;\r\n        }\r\n    }\r\n    sideCollisionDetection(width, height) {\r\n        let head = this.headCoordinates;\r\n        if (head.x >= width) {\r\n            let newHead = {\r\n                x: 0,\r\n                y: head.y,\r\n            };\r\n            this.pos.unshift(newHead);\r\n            this.pos.pop();\r\n        }\r\n        if (head.x < 0) {\r\n            let newHead = {\r\n                x: this.config.step * this.config.columns - this.config.step,\r\n                y: head.y,\r\n            };\r\n            this.pos.unshift(newHead);\r\n            this.pos.pop();\r\n        }\r\n        if (head.y >= height) {\r\n            let newHead = {\r\n                x: head.x,\r\n                y: 0,\r\n            };\r\n            this.pos.unshift(newHead);\r\n            this.pos.pop();\r\n        }\r\n        if (head.y < 0) {\r\n            let newHead = {\r\n                x: head.x,\r\n                y: this.config.step * this.config.rows - this.config.step,\r\n            };\r\n            this.pos.unshift(newHead);\r\n            this.pos.pop();\r\n        }\r\n    }\r\n    move() {\r\n        if (this.controls.up) {\r\n            this.moveUp();\r\n        }\r\n        if (this.controls.down) {\r\n            this.moveDown();\r\n        }\r\n        if (this.controls.left) {\r\n            this.moveLeft();\r\n        }\r\n        if (this.controls.right) {\r\n            this.moveRight();\r\n        }\r\n    }\r\n    moveRight() {\r\n        let head = this.headCoordinates;\r\n        let newHead = {\r\n            x: head.x + this.config.step,\r\n            y: head.y,\r\n        };\r\n        this.pos.unshift(newHead);\r\n        this.pos.pop();\r\n    }\r\n    moveLeft() {\r\n        let head = this.headCoordinates;\r\n        let newHead = {\r\n            x: head.x - this.config.step,\r\n            y: head.y,\r\n        };\r\n        this.pos.unshift(newHead);\r\n        this.pos.pop();\r\n    }\r\n    moveUp() {\r\n        let head = this.headCoordinates;\r\n        let newHead = {\r\n            x: head.x,\r\n            y: head.y - this.config.step,\r\n        };\r\n        this.pos.unshift(newHead);\r\n        this.pos.pop();\r\n    }\r\n    moveDown() {\r\n        let head = this.headCoordinates;\r\n        let newHead = {\r\n            x: head.x,\r\n            y: head.y + this.config.step,\r\n        };\r\n        this.pos.unshift(newHead);\r\n        this.pos.pop();\r\n    }\r\n    get hasEatenApple() {\r\n        return this._hasEatenApple;\r\n    }\r\n    get coordinates() {\r\n        return this.pos;\r\n    }\r\n    get headCoordinates() {\r\n        return {\r\n            x: this.pos[0].x,\r\n            y: this.pos[0].y,\r\n        };\r\n    }\r\n    set hasEatenApple(bool) {\r\n        this._hasEatenApple = bool;\r\n    }\r\n    set headCoordinates(coordinates) {\r\n        const { x, y } = coordinates;\r\n        this.pos[0].x = x;\r\n        this.pos[0].y = y;\r\n    }\r\n}\r\nexports.default = Snake;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.randPosition = void 0;\r\nconst randPosition = (cellSize, cellsQty) => {\r\n    let randInt = Math.floor(Math.random() * cellsQty);\r\n    let randStep = cellSize * randInt;\r\n    return randStep;\r\n};\r\nexports.randPosition = randPosition;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nrequire(\"./app/main\");\r\n"],"names":["__importDefault","this","mod","__esModule","Object","defineProperty","exports","value","Map_1","Snake_1","Apple_1","canvas","ctx","getContext","map","default","snake","position","genUnusedPosition","coordinates","apple","setSize","setGrid","draw","animate","setTimeout","clear","update","appleCollisionDetection","hasEatenApple","grow","requestAnimationFrame","gameSetup","wrapperId","document","createElement","container","getElementById","append","createCanvas","settings","appleSettings","snakeSettings","mapSettings","columns","rows","cellSize","strokeStyle","lineWidth","step","color","settings_1","constructor","pos","config","_isEaten","_size","beginPath","roundRect","x","y","fillStyle","fill","stroke","Error","isEaten","bool","up","down","left","right","addKeyboardListener","onkeydown","e","code","randPosition_1","calcWidth","calcHeight","_width","_height","positions","randPosition","w","h","width","height","drawVerticalLines","drawHorizontalLines","clearRect","moveTo","lineTo","Controls_1","_hasEatenApple","controls","lastPart","length","push","move","sideCollisionDetection","head","headCoordinates","newHead","unshift","pop","moveUp","moveDown","moveLeft","moveRight","cellsQty","Math","floor","random","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","call"],"sourceRoot":""}